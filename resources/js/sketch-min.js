function setup(){if(windowWidth<=768){console.log("inside if");var i=(document.getElementById("sketch"),createCanvas(windowWidth,windowHeight-2));i.parent("sketch");for(var s=0;80>s;s++)balls[s]=new Ball(random(0,windowWidth),random(0,windowHeight),random(-5,5),random(-5,5),random(3,25))}else{console.log("inside else");var i=(document.getElementById("sketch"),createCanvas(windowWidth,windowHeight));i.parent("sketch");for(var s=0;200>s;s++)balls[s]=new Ball(random(0,windowWidth),random(0,windowHeight),random(-5,5),random(-5,5),random(3,15))}}function draw(){background(0),resetFussion();for(var i=0;i<balls.length;i++)balls[i].display(i),balls[i].move(),balls[i].bounce(),balls[i].fussion(balls,i);checker()}function mousePressed(){for(var i=100,s=0;10>s;s++)balls.push(new Ball(mouseX+Math.ceil(random(-1*i,i)),mouseY+Math.ceil(random(-1*i,i)),random(-10,10),random(-10,10),10))}function Ball(s,t,e,l,h){this.id=0,this.size=h,this.r=random(0,255),this.g=random(0,255),this.b=random(0,255),this.x=s,this.y=t,this.velX=e,this.velY=l,this.onTop=!0,this.reproduced=!1,this.age=1,this.display=function(i){noStroke(),fill(this.r,this.g,this.b),ellipse(this.x,this.y,this.size,this.size),this.id=i},this.move=function(){this.x+=this.velX,this.y+=this.velY},this.bounce=function(){this.x>0&&this.x<width&&this.y>height?this.velY=-1*this.velY:this.x>width&&this.y>0&&this.y<height?this.velX=-1*this.velX:this.x>0&&this.x<width&&this.y<0?this.velY=-1*this.velY:this.x<0&&this.y>0&&this.y<height&&(this.velX=-1*this.velX)},this.reproduce=function(i){for(s=0;s<i.length;s++)if(this.id!=s&&(this.onTop=collideCircleCircle(this.x,this.y,this.size,i[s].x,i[s].y,i[s].size),1==this.onTop&&!this.reproduced&&!i[s].reproduced)){for(var s=0;s<Math.ceil(random(2));s++)balls.push(new Ball);this.reproduced=!0,i[s].reproduced=!0}},this.fussion=function(s,t){for(i=0;i<s.length;i++)this.id!=s[i].id&&(this.onTop=collideCircleCircle(this.x,this.y,this.size,s[i].x,s[i].y,s[i].size),1==this.onTop&&(this.size>s[i].size?(this.size+=s[i].size/5,balls.splice(i,1)):(s[i].size+=this.size/2,balls.splice(t,1))))},this.lifespan=function(i){350==this.age?balls.splice(i,1):this.age++}}function atomicBomb(i){i.length>100&&i.splice(0,i.length)}function resetFussion(){if(1==balls.length){var i=balls[0].x,s=balls[0].y,t=balls[0].size/2;if(balls.splice(0,1),windowWidth<=768)for(var e=0;100>e;e++){var l=Math.random()*PI*2,h=Math.cos(l)*random(t),n=Math.sin(l)*random(t);balls[e]=new Ball(i+h,s+n,random(-10,10),random(-10,10),3)}else for(var e=0;500>e;e++){var l=Math.random()*PI*2,h=Math.cos(l)*random(t),n=Math.sin(l)*random(t);balls[e]=new Ball(i+h,s+n,random(-10,10),random(-10,10),3)}}}function checker(){for(var i=0;i<balls.length;i++)(balls[i].x<-20||balls[i].x>width+20||balls[i].y<-20||balls[i].y>height+20)&&balls.splice(i,1)}function collideCircleCircle(i,s,t,e,l,h){return this.dist(i,s,e,l)<=t/2+h/2?!0:!1}var balls=[];